{
  "id": "CVE-2024-35196",
  "sourceIdentifier": "security-advisories@github.com",
  "published": "2024-05-31T18:15:12.993",
  "lastModified": "2024-11-21T09:19:54.650",
  "vulnStatus": "Awaiting Analysis",
  "cveTags": [

  ],
  "descriptions": [
    {
      "lang": "en",
      "value": "Sentry is a developer-first error tracking and performance monitoring platform. Sentry's Slack integration incorrectly records the incoming request body in logs. This request data can contain sensitive information, including the deprecated Slack verification token. With this verification token, it is possible under specific configurations, an attacker can forge requests and act as the Slack integration. The request body is leaked in log entries matching `event == \"slack.*\" && name == \"sentry.integrations.slack\" && request_data == *`. The deprecated slack verification token, will be found in the `request_data.token` key. **SaaS users** do not need to take any action. **Self-hosted users** should upgrade to version 24.5.0 or higher, rotate their Slack verification token, and use the Slack Signing Secret instead of the verification token. For users only using the `slack.signing-secret` in their self-hosted configuration, the legacy verification token is not used to verify the webhook payload. It is ignored. Users unable to upgrade should either set the `slack.signing-secret` instead of `slack.verification-token`. The signing secret is Slack's recommended way of authenticating webhooks. By having `slack.singing-secret` set, Sentry self-hosted will no longer use the verification token for authentication of the webhooks, regardless of whether `slack.verification-token` is set or not. Alternatively if the self-hosted instance is unable to be upgraded or re-configured to use the `slack.signing-secret`, the logging configuration can be adjusted to not generate logs from the integration. The default logging configuration can be found in `src/sentry/conf/server.py`. **Services should be restarted once the configuration change is saved.**\n"
    },
    {
      "lang": "es",
      "value": "Sentry es una plataforma de seguimiento de errores y supervisión del rendimiento orientada a los desarrolladores. La integración de Sentry con Slack registra incorrectamente el cuerpo de la solicitud entrante en los registros. Los datos de esta solicitud pueden contener información confidencial, incluido el token de verificación de Slack obsoleto. Con este token de verificación, es posible que, en configuraciones específicas, un atacante pueda falsificar solicitudes y actuar como integración de Slack. El cuerpo de la solicitud se filtra en las entradas del registro que coinciden con `event == \"slack.*\" &amp;&amp; name == \"sentry.integrations.slack\" &amp;&amp; request_data == *`. El token de verificación de holgura obsoleto se encontrará en la clave `request_data.token`. **Los usuarios de SaaS** no necesitan realizar ninguna acción. **Los usuarios autohospedados** deben actualizar a la versión 24.5.0 o superior, rotar su token de verificación de Slack y usar el secreto de firma de Slack en lugar del token de verificación. Para los usuarios que solo usan `slack.signing-secret` en su configuración autohospedada, el token de verificación heredado no se usa para verificar la carga útil del webhook. Se ignora. Los usuarios que no puedan actualizar deben configurar `slack.signing-secret` en lugar de `slack.verification-token`. El secreto de firma es la forma recomendada por Slack de autenticar webhooks. Al tener configurado `slack.singing-secret`, Sentry autohospedado ya no usará el token de verificación para la autenticación de los webhooks, independientemente de si `slack.verification-token` está configurado o no. Alternativamente, si la instancia autohospedada no se puede actualizar o reconfigurar para usar `slack.signing-secret`, la configuración de registro se puede ajustar para no generar registros de la integración. La configuración de registro predeterminada se puede encontrar en `src/sentry/conf/server.py`. **Los servicios deben reiniciarse una vez que se guarda el cambio de configuración.**"
    }
  ],
  "metrics": {
    "cvssMetricV31": [
      {
        "source": "security-advisories@github.com",
        "type": "Secondary",
        "cvssData": {
          "version": "3.1",
          "vectorString": "CVSS:3.1/AV:N/AC:H/PR:H/UI:R/S:U/C:L/I:N/A:N",
          "baseScore": 2.0,
          "baseSeverity": "LOW",
          "attackVector": "NETWORK",
          "attackComplexity": "HIGH",
          "privilegesRequired": "HIGH",
          "userInteraction": "REQUIRED",
          "scope": "UNCHANGED",
          "confidentialityImpact": "LOW",
          "integrityImpact": "NONE",
          "availabilityImpact": "NONE"
        },
        "exploitabilityScore": 0.5,
        "impactScore": 1.4
      }
    ]
  },
  "weaknesses": [
    {
      "source": "security-advisories@github.com",
      "type": "Secondary",
      "description": [
        {
          "lang": "en",
          "value": "CWE-532"
        }
      ]
    }
  ],
  "references": [
    {
      "url": "https://api.slack.com/authentication/verifying-requests-from-slack#app-management-updates",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://api.slack.com/authentication/verifying-requests-from-slack#deprecation",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://api.slack.com/authentication/verifying-requests-from-slack#regenerating",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://develop.sentry.dev/integrations/slack",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://github.com/getsentry/sentry/blob/17d2b87e39ccd57e11da4deed62971ff306253d1/src/sentry/conf/server.py#L1307",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://github.com/getsentry/sentry/pull/70508",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://github.com/getsentry/sentry/security/advisories/GHSA-c2g2-gx4j-rj3j",
      "source": "security-advisories@github.com"
    },
    {
      "url": "https://api.slack.com/authentication/verifying-requests-from-slack#app-management-updates",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    },
    {
      "url": "https://api.slack.com/authentication/verifying-requests-from-slack#deprecation",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    },
    {
      "url": "https://api.slack.com/authentication/verifying-requests-from-slack#regenerating",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    },
    {
      "url": "https://develop.sentry.dev/integrations/slack",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    },
    {
      "url": "https://github.com/getsentry/sentry/blob/17d2b87e39ccd57e11da4deed62971ff306253d1/src/sentry/conf/server.py#L1307",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    },
    {
      "url": "https://github.com/getsentry/sentry/pull/70508",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    },
    {
      "url": "https://github.com/getsentry/sentry/security/advisories/GHSA-c2g2-gx4j-rj3j",
      "source": "af854a3a-2127-422b-91ae-364da2661108"
    }
  ]
}